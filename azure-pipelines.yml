trigger:
- main

pool:
  vmImage: 'ubuntu-latest'

steps:

- script: |
    echo "Building Docker image using docker compose..."
    docker compose build
  displayName: 'Build Docker Image'

- script: |
    echo "Starting container..."
    docker compose up -d
  displayName: 'Start Container'

- script: |
    echo "Waiting for container health check..."
    sleep 40
    docker ps
  displayName: 'Verify Container Running'

- script: |
    echo "Stopping container..."
    docker compose down
  displayName: 'Stop Container'
